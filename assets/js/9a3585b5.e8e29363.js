"use strict";(self.webpackChunkuimotelndefined=self.webpackChunkuimotelndefined||[]).push([[2551],{6385:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"developers/Scenarios/call_originate","title":"Originate Call","description":"It is recommended to review this before studying this section.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/developers/4-Scenarios/3-call_originate.md","sourceDirName":"developers/4-Scenarios","slug":"/developers/Scenarios/call_originate","permalink":"/wiki.test/developers/Scenarios/call_originate","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"docs","previous":{"title":"Exten API","permalink":"/wiki.test/developers/Scenarios/exten_api"},"next":{"title":"Introduction","permalink":"/wiki.test/developers/Autodialer_API/introautodialer"}}');var a=n(4848),l=n(8453),i=n(5537),s=n(9329);const o={title:void 0},c="Originate Call",d={},u=[{value:"1: <strong>Call Originate</strong> Between Extensions 570 and 553",id:"1-call-originate-between-extensions-570-and-553",level:3},{value:"<strong>Sample Invocation</strong>",id:"sample-invocation",level:2},{value:"2: <strong>Call Originate</strong> Between Number 09371234567 and Extension 521",id:"2-call-originate-between-number-09371234567-and-extension-521",level:3},{value:"Sample Invocation",id:"sample-invocation-1",level:2},{value:"3: <strong>Call Originate</strong> Between Extension 521 and Number 09371234567",id:"3-call-originate-between-extension-521-and-number-09371234567",level:3},{value:"Sample Invocation",id:"sample-invocation-2",level:2},{value:"4: Originate Call between 31041570 and 09371234567",id:"4-originate-call-between-31041570-and-09371234567",level:3},{value:"Sample Invocation",id:"sample-invocation-3",level:2},{value:"5: Apply call time limit on a Originate call",id:"5-apply-call-time-limit-on-a-originate-call",level:3},{value:"6: Record Originate call conversations",id:"6-record-originate-call-conversations",level:3},{value:"7: Conduct a survey after the call",id:"7-conduct-a-survey-after-the-call",level:3},{value:"8: Warning Before Call Ends",id:"8-warning-before-call-ends",level:3},{value:"9: Play Hold Music for the First Party",id:"9-play-hold-music-for-the-first-party",level:3}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"originate-call",children:"Originate Call"})}),"\n",(0,a.jsx)(t.admonition,{title:"Recommendation",type:"tip",children:(0,a.jsxs)(t.p,{children:["It is recommended to review ",(0,a.jsx)(t.a,{href:"../SimotelAPI/v4/call-originate",children:"this"})," before studying this section."]})}),"\n",(0,a.jsxs)(t.h3,{id:"1-call-originate-between-extensions-570-and-553",children:["1: ",(0,a.jsx)(t.strong,{children:"Call Originate"})," Between Extensions 570 and 553"]}),"\n",(0,a.jsx)(t.h2,{id:"sample-invocation",children:(0,a.jsx)(t.strong,{children:"Sample Invocation"})}),"\n","\n",(0,a.jsxs)(i.A,{defaultValue:"usageCode",values:[{label:"\u064dExample To Use ",value:"usageCode"},{label:"Example Output",value:"outputCode"}],children:[(0,a.jsx)(s.A,{value:"usageCode",children:(0,a.jsxs)(i.A,{defaultValue:"PHP",values:[{label:"PHP",value:"PHP"},{label:"JS",value:"JS"},{label:"Curl",value:"Curl"}],children:[(0,a.jsx)(s.A,{value:"PHP",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code PHP"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'\t<?php\r\n\r\n\t$curl = curl_init();\r\n\r\n\tcurl_setopt_array($curl, array(\r\n\t  CURLOPT_URL => \'http://192.168.51.20/api/v4/call/originate/act\',\r\n\t  CURLOPT_RETURNTRANSFER => true,\r\n\t  CURLOPT_ENCODING => \'\',\r\n\t  CURLOPT_MAXREDIRS => 10,\r\n\t  CURLOPT_TIMEOUT => 0,\r\n\t  CURLOPT_FOLLOWLOCATION => true,\r\n\t  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\r\n\t  CURLOPT_CUSTOMREQUEST => \'POST\',\r\n\t  CURLOPT_POSTFIELDS =>\'{\r\n\t\t"caller":"570",\r\n\t\t"callee":"553",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"masking",\r\n\t\t"timeout":"30"\r\n\t}\',\r\n\t  CURLOPT_HTTPHEADER => array(\r\n\t\t\'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\',\r\n\t\t\'Authorization: Basic c2FkcjpTYWRyQDEyMw==\',\r\n\t\t\'Content-Type: application/json\'\r\n\t  ),\r\n\t));\r\n\r\n\t$response = curl_exec($curl);\r\n\r\n\tcurl_close($curl);\r\n\techo $response;\r\n?>\n'})})]})}),(0,a.jsx)(s.A,{value:"JS",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code JS"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'\t<html>\r\n\t\t\t<head>\r\n\t\t\t\t<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>\r\n\t\t\t</head>\r\n\t\t<body>\r\n\t\t\t<script>\r\n\t\t\t\tvar settings = {\r\n\t\t\t\t  "url": "http://192.168.51.20/api/v4/call/originate/act",\r\n\t\t\t\t  "method": "POST",\r\n\t\t\t\t  "timeout": 0,\r\n\t\t\t\t  "headers": {\r\n\t\t\t\t\t"X-APIKEY": "9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG",\r\n\t\t\t\t\t"Authorization": "Basic c2FkcjpTYWRyQDEyMw==",\r\n\t\t\t\t\t"Content-Type": "application/json"\r\n\t\t\t\t  },\r\n\t\t\t\t  "data": JSON.stringify({\r\n\t\t\t\t\t"caller": "570",\r\n\t\t\t\t\t"callee": "553",\r\n\t\t\t\t\t"context": "main_routing",\r\n\t\t\t\t\t"caller_id": "masking",\r\n\t\t\t\t\t"timeout": "30"\r\n\t\t\t\t  }),\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$.ajax(settings).done(function (response) {\r\n\t\t\t\t  console.log(response);\r\n\t\t\t\t});\r\n\t\t\t<\/script>\r\n\t\t</body>\r\n\t</html>\n'})})]})}),(0,a.jsx)(s.A,{value:"Curl",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code Curl"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'\tcurl --location --request POST \'http://192.168.51.20/api/v4/call/originate/act\' \\\r\n\t--header \'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\' \\\r\n\t--header \'Authorization: Basic c2FkcjpTYWRyQDEyMw==\' \\\r\n\t--header \'Content-Type: application/json\' \\\r\n\t--data-raw \'{\r\n\t\t"caller":"570",\r\n\t\t"callee":"553",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"masking",\r\n\t\t"timeout":"30"\r\n\t}\'\n'})})]})})]})}),(0,a.jsx)(s.A,{value:"outputCode",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'{\r\n    "success": 1,\r\n    "message": null,\r\n    "data": {\r\n        "originated_call_id": "orig.call.1703145054.787335"\r\n    }\r\n}\n'})})})]}),"\n",(0,a.jsxs)(t.h3,{id:"2-call-originate-between-number-09371234567-and-extension-521",children:["2: ",(0,a.jsx)(t.strong,{children:"Call Originate"})," Between Number 09371234567 and Extension 521"]}),"\n",(0,a.jsxs)(t.p,{children:["Since the exit path for the caller (the first person in the call) is determined by the ",(0,a.jsx)(t.code,{children:"trunk_name"})," parameter, it is essential to specify this value in the scenario. In this example, it is set to ",(0,a.jsx)(t.strong,{children:"Cisco"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"sample-invocation-1",children:"Sample Invocation"}),"\n",(0,a.jsxs)(i.A,{defaultValue:"usageCode",values:[{label:"Example To Use",value:"usageCode"},{label:"Example Output",value:"outputCode"}],children:[(0,a.jsx)(s.A,{value:"usageCode",children:(0,a.jsxs)(i.A,{defaultValue:"PHP",values:[{label:"PHP",value:"PHP"},{label:"JS",value:"JS"},{label:"Curl",value:"Curl"}],children:[(0,a.jsx)(s.A,{value:"PHP",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code PHP"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'\t<?php\r\n\r\n\t$curl = curl_init();\r\n\r\n\tcurl_setopt_array($curl, array(\r\n\t  CURLOPT_URL => \'http://192.168.51.20/api/v4/call/originate/act\',\r\n\t  CURLOPT_RETURNTRANSFER => true,\r\n\t  CURLOPT_ENCODING => \'\',\r\n\t  CURLOPT_MAXREDIRS => 10,\r\n\t  CURLOPT_TIMEOUT => 0,\r\n\t  CURLOPT_FOLLOWLOCATION => true,\r\n\t  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\r\n\t  CURLOPT_CUSTOMREQUEST => \'POST\',\r\n\t  CURLOPT_POSTFIELDS =>\'{\r\n\t\t"caller":"09371234567",\r\n\t\t"callee":"521",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"557",\r\n\t\t"trunk_name":"Cisco",\r\n\t\t"timeout":"30"\r\n\t}\',\r\n\t  CURLOPT_HTTPHEADER => array(\r\n\t\t\'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\',\r\n\t\t\'Authorization: Basic c2FkcjpTYWRyQDEyMw==\',\r\n\t\t\'Content-Type: application/json\'\r\n\t  ),\r\n\t));\r\n\r\n\t$response = curl_exec($curl);\r\n\r\n\tcurl_close($curl);\r\n\techo $response;\r\n\t?>\n'})})]})}),(0,a.jsx)(s.A,{value:"JS",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code JS"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'\t<html>\r\n\t\t\t<head>\r\n\t\t\t\t<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>\r\n\t\t\t</head>\r\n\t\t<body>\r\n\t\t\t<script>\r\n\t\t\t\tvar settings = {\r\n\t\t\t\t  "url": "http://192.168.51.20/api/v4/call/originate/act",\r\n\t\t\t\t  "method": "POST",\r\n\t\t\t\t  "timeout": 0,\r\n\t\t\t\t  "headers": {\r\n\t\t\t\t\t"X-APIKEY": "9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG",\r\n\t\t\t\t\t"Authorization": "Basic c2FkcjpTYWRyQDEyMw==",\r\n\t\t\t\t\t"Content-Type": "application/json"\r\n\t\t\t\t  },\r\n\t\t\t\t  "data": JSON.stringify({\r\n\t\t\t\t\t"caller": "09371234567",\r\n\t\t\t\t\t"callee": "521",\r\n\t\t\t\t\t"context": "main_routing",\r\n\t\t\t\t\t"caller_id": "557",\r\n\t\t\t\t\t"trunk_name": "Cisco",\r\n\t\t\t\t\t"timeout": "30"\r\n\t\t\t\t  }),\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$.ajax(settings).done(function (response) {\r\n\t\t\t\t  console.log(response);\r\n\t\t\t\t});\r\n\t\t\t<\/script>\r\n\t\t</body>\r\n\t</html>\n'})})]})}),(0,a.jsx)(s.A,{value:"Curl",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code Curl"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'\tcurl --location --request POST \'http://192.168.51.20/api/v4/call/originate/act\' \\\r\n\t--header \'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\' \\\r\n\t--header \'Authorization: Basic c2FkcjpTYWRyQDEyMw==\' \\\r\n\t--header \'Content-Type: application/json\' \\\r\n\t--data-raw \'{\r\n\t\t"caller":"09371234567",\r\n\t\t"callee":"521",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"557",\r\n\t\t"trunk_name":"Cisco",\r\n\t\t"timeout":"30"\r\n\t}\'\n'})})]})})]})}),(0,a.jsx)(s.A,{value:"outputCode",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'{\r\n    "success": 1,\r\n    "message": null,\r\n    "data": {\r\n        "originated_call_id": "orig.call.1703145054.787335"\r\n    }\r\n}\n'})})})]}),"\n",(0,a.jsxs)(t.h3,{id:"3-call-originate-between-extension-521-and-number-09371234567",children:["3: ",(0,a.jsx)(t.strong,{children:"Call Originate"})," Between Extension 521 and Number 09371234567"]}),"\n",(0,a.jsxs)(t.p,{children:["Note that since the exit path for the callee (the second person in the call) is determined by the ",(0,a.jsx)(t.code,{children:"context"})," parameter, if the callee is on the telecommunication network, it is necessary for the corresponding ",(0,a.jsx)(t.code,{children:"Outgoing Route"})," component to have access to the telecommunication network. To achieve this, the ",(0,a.jsx)(t.code,{children:"Outgoing Route"})," component is connected to the trunk component."]}),"\n",(0,a.jsxs)(t.p,{children:["In this example, the value of ",(0,a.jsx)(t.code,{children:"context"})," is set to ",(0,a.jsx)(t.strong,{children:"main_routing"}),", and in the ",(0,a.jsx)(t.code,{children:"Outgoing_Route"})," component, the ",(0,a.jsx)(t.code,{children:"context"})," is also configured to ",(0,a.jsx)(t.strong,{children:"main_routing"}),". Therefore, the second person's call exits via this ",(0,a.jsx)(t.code,{children:"Outgoing Route"}),", which has access to the trunk."]}),"\n",(0,a.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/i1ywiloewqlybxrsrz0on5aqdwbu8vw2t2tjurzk1a4k91xqjo",target:"_blank",children:(0,a.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/i1ywiloewqlybxrsrz0on5aqdwbu8vw2t2tjurzk1a4k91xqjo/plan.png"})}),"\n",(0,a.jsx)(t.h2,{id:"sample-invocation-2",children:"Sample Invocation"}),"\n",(0,a.jsxs)(i.A,{defaultValue:"usageCode",values:[{label:"Example To Use",value:"usageCode"},{label:"Example Output",value:"outputCode"}],children:[(0,a.jsx)(s.A,{value:"usageCode",children:(0,a.jsxs)(i.A,{defaultValue:"PHP",values:[{label:"PHP",value:"PHP"},{label:"JS",value:"JS"},{label:"Curl",value:"Curl"}],children:[(0,a.jsx)(s.A,{value:"PHP",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code PHP"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'   <?php\r\n\r\n   $curl = curl_init();\r\n\r\n   curl_setopt_array($curl, array(\r\n     CURLOPT_URL => \'http://192.168.51.20/api/v4/call/originate/act\',\r\n     CURLOPT_RETURNTRANSFER => true,\r\n     CURLOPT_ENCODING => \'\',\r\n     CURLOPT_MAXREDIRS => 10,\r\n     CURLOPT_TIMEOUT => 0,\r\n     CURLOPT_FOLLOWLOCATION => true,\r\n     CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\r\n     CURLOPT_CUSTOMREQUEST => \'POST\',\r\n     CURLOPT_POSTFIELDS =>\'{\r\n   \t"caller":"521",\r\n   \t"callee":"09371234567",\r\n   \t"context":"main_routing",\r\n   \t"caller_id":"557",\r\n   \t"timeout":"30"\r\n   }\',\r\n     CURLOPT_HTTPHEADER => array(\r\n   \t\'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\',\r\n   \t\'Authorization: Basic c2FkcjpTYWRyQDEyMw==\',\r\n   \t\'Content-Type: application/json\'\r\n     ),\r\n   ));\r\n\r\n   $response = curl_exec($curl);\r\n\r\n   curl_close($curl);\r\n   echo $response;\r\n?>\n'})})]})}),(0,a.jsx)(s.A,{value:"JS",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code JS"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'\t<html>\r\n\t\t\t<head>\r\n\t\t\t\t<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>\r\n\t\t\t</head>\r\n\t\t<body>\r\n\t\t\t<script>\r\n\t\t\t\tvar settings = {\r\n\t\t\t\t  "url": "http://192.168.51.20/api/v4/call/originate/act",\r\n\t\t\t\t  "method": "POST",\r\n\t\t\t\t  "timeout": 0,\r\n\t\t\t\t  "headers": {\r\n\t\t\t\t\t"X-APIKEY": "9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG",\r\n\t\t\t\t\t"Authorization": "Basic c2FkcjpTYWRyQDEyMw==",\r\n\t\t\t\t\t"Content-Type": "application/json"\r\n\t\t\t\t  },\r\n\t\t\t\t  "data": JSON.stringify({\r\n\t\t\t\t\t"caller": "521",\r\n\t\t\t\t\t"callee": "09371234567",\r\n\t\t\t\t\t"context": "main_routing",\r\n\t\t\t\t\t"caller_id": "557",\r\n\t\t\t\t\t"timeout": "30"\r\n\t\t\t\t  }),\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$.ajax(settings).done(function (response) {\r\n\t\t\t\t  console.log(response);\r\n\t\t\t\t});\r\n\t\t\t<\/script>\r\n\t\t</body>\r\n\t</html>\n'})})]})}),(0,a.jsx)(s.A,{value:"Curl",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code Curl"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'\tcurl --location --request POST \'http://192.168.51.20/api/v4/call/originate/act\' \\\r\n\t--header \'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\' \\\r\n\t--header \'Authorization: Basic c2FkcjpTYWRyQDEyMw==\' \\\r\n\t--header \'Content-Type: application/json\' \\\r\n\t--data-raw \'{\r\n\t\t"caller":"521",\r\n\t\t"callee":"09371234567",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"557",\r\n\t\t"timeout":"30"\r\n\t}\'\n'})})]})})]})}),(0,a.jsx)(s.A,{value:"outputCode",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'{\r\n    "success": 1,\r\n    "message": null,\r\n    "data": {\r\n        "originated_call_id": "orig.call.1703145054.787335"\r\n    }\r\n}\n'})})})]}),"\n",(0,a.jsx)(t.h3,{id:"4-originate-call-between-31041570-and-09371234567",children:"4: Originate Call between 31041570 and 09371234567"}),"\n",(0,a.jsx)(t.h2,{id:"sample-invocation-3",children:"Sample Invocation"}),"\n",(0,a.jsxs)(i.A,{defaultValue:"usageCode",values:[{label:"Example To Use",value:"usageCode"},{label:"Example Output",value:"outputCode"}],children:[(0,a.jsx)(s.A,{value:"usageCode",children:(0,a.jsxs)(i.A,{defaultValue:"PHP",values:[{label:"PHP",value:"PHP"},{label:"JS",value:"JS"},{label:"Curl",value:"Curl"}],children:[(0,a.jsx)(s.A,{value:"PHP",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code PHP"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-php",children:'\t<?php\r\n\r\n\t$curl = curl_init();\r\n\r\n\tcurl_setopt_array($curl, array(\r\n\t  CURLOPT_URL => \'http://192.168.51.20/api/v4/call/originate/act\',\r\n\t  CURLOPT_RETURNTRANSFER => true,\r\n\t  CURLOPT_ENCODING => \'\',\r\n\t  CURLOPT_MAXREDIRS => 10,\r\n\t  CURLOPT_TIMEOUT => 0,\r\n\t  CURLOPT_FOLLOWLOCATION => true,\r\n\t  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,\r\n\t  CURLOPT_CUSTOMREQUEST => \'POST\',\r\n\t  CURLOPT_POSTFIELDS =>\'{\r\n\t\t"caller":"31041570",\r\n\t\t"callee":"09371234567",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"557",\r\n\t\t"trunk_name":"Cisco",\r\n\t\t"timeout":"30"\r\n\t}\',\r\n\t  CURLOPT_HTTPHEADER => array(\r\n\t\t\'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\',\r\n\t\t\'Authorization: Basic c2FkcjpTYWRyQDEyMw==\',\r\n\t\t\'Content-Type: application/json\'\r\n\t  ),\r\n\t));\r\n\r\n\t$response = curl_exec($curl);\r\n\r\n\tcurl_close($curl);\r\n\techo $response;\r\n?>\n'})})]})}),(0,a.jsx)(s.A,{value:"JS",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code JS"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-js",children:'\t<html>\r\n\t\t\t<head>\r\n\t\t\t\t<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"><\/script>\r\n\t\t\t</head>\r\n\t\t<body>\r\n\t\t\t<script>\r\n\t\t\t\t\tvar settings = {\r\n\t\t\t\t\t  "url": "http://192.168.51.20/api/v4/call/originate/act",\r\n\t\t\t\t\t  "method": "POST",\r\n\t\t\t\t\t  "timeout": 0,\r\n\t\t\t\t\t  "headers": {\r\n\t\t\t\t\t\t"X-APIKEY": "9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG",\r\n\t\t\t\t\t\t"Authorization": "Basic c2FkcjpTYWRyQDEyMw==",\r\n\t\t\t\t\t\t"Content-Type": "application/json"\r\n\t\t\t\t\t  },\r\n\t\t\t\t\t  "data": JSON.stringify({\r\n\t\t\t\t\t\t"caller": "31041570",\r\n\t\t\t\t\t\t"callee": "09371234567",\r\n\t\t\t\t\t\t"context": "main_routing",\r\n\t\t\t\t\t\t"caller_id": "557",\r\n\t\t\t\t\t\t"trunk_name": "Cisco",\r\n\t\t\t\t\t\t"timeout": "30"\r\n\t\t\t\t\t  }),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t$.ajax(settings).done(function (response) {\r\n\t\t\t\t\t  console.log(response);\r\n\t\t\t\t\t});\r\n\t\t\t<\/script>\r\n\t\t</body>\r\n\t</html>\n'})})]})}),(0,a.jsx)(s.A,{value:"Curl",children:(0,a.jsxs)(n,{children:[(0,a.jsx)("summary",{children:"Show Full Source Code Curl"}),(0,a.jsx)("br",{}),(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:'\tcurl --location --request POST \'http://192.168.51.20/api/v4/call/originate/act\' \\\r\n\t--header \'X-APIKEY: 9UV0BWKRL83PYIH9Gv1fI85d41lO4S932EeX3wHC47sHjMJOMG\' \\\r\n\t--header \'Authorization: Basic c2FkcjpTYWRyQDEyMw==\' \\\r\n\t--header \'Content-Type: application/json\' \\\r\n\t--data-raw \'{\r\n\t\t"caller":"31041570",\r\n\t\t"callee":"09371234567",\r\n\t\t"context":"main_routing",\r\n\t\t"caller_id":"557",\r\n\t\t"trunk_name":"Cisco",\r\n\t\t"timeout":"30"\r\n\t}\'\n'})})]})})]})}),(0,a.jsx)(s.A,{value:"outputCode",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:'{\r\n    "success": 1,\r\n    "message": null,\r\n    "data": {\r\n        "originated_call_id": "orig.call.1703145054.787335"\r\n    }\r\n}\n'})})})]}),"\n",(0,a.jsx)(t.h3,{id:"5-apply-call-time-limit-on-a-originate-call",children:"5: Apply call time limit on a Originate call"}),"\n",(0,a.jsxs)(t.p,{children:["To apply a time limit on the call, another API called ",(0,a.jsx)(t.code,{children:"Trunk API"})," is required, which is a component in the Dialplan. Its role is to send call information to the web service and receive the second party's number and the ",(0,a.jsx)(t.code,{children:"call_limit"})," from the web service in response."]}),"\n",(0,a.jsxs)(t.p,{children:["For more information about the ",(0,a.jsx)(t.code,{children:"Trunk API"}),", visit ",(0,a.jsx)(t.a,{href:"../SimotelWebhooks/DialplanApiComponents/trunk_api",children:"here"}),"."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"The implementation of the scenario is divided into four main steps:"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"1-"})," A Originate call request is sent by the web service. After receiving the Originate call request, the contact center starts calling the first number."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"2-"})," After the first number answers the call, the ",(0,a.jsx)(t.code,{children:"Trunk API"})," component sends a request with the first party's number and other call details to the web service. The web service then returns the second party's number and the time limit to the contact center, which then proceeds to call the second party."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"3-"})," After the second party answers, the call is established, and the time limit is applied. As soon as the time limit is reached, the call channel is disconnected by the contact center. There is a feature where the contact center can warn the first party (consultant, etc.) a few minutes before the conversation ends that time is running out."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"4-"})," After the call ends, the full call details are sent to the web service using the ",(0,a.jsx)(t.code,{children:"CDR"})," event. With the ",(0,a.jsx)(t.code,{children:"unique id"})," sent in the second step, you can differentiate the call reports."]}),"\n",(0,a.jsxs)(t.p,{children:["For more information about ",(0,a.jsx)(t.code,{children:"CDR"}),", visit ",(0,a.jsx)(t.a,{href:"../SimotelWebhooks/Events/cdr",children:"here"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["The implementation scenario in the Dialplan, where the ",(0,a.jsx)(t.strong,{children:"Trunk API"})," component is used instead of the Trunk component, is shown below."]}),"\n",(0,a.jsxs)(t.p,{children:["Please make sure to set your web service address in the ",(0,a.jsx)(t.strong,{children:"Trunk API"})," settings."]}),"\n",(0,a.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/1mdp1s7bw0860pa4tng7unmancjydue62x7zuidd9jayi9if5s",target:"_blank",children:(0,a.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/1mdp1s7bw0860pa4tng7unmancjydue62x7zuidd9jayi9if5s/plan.png"})}),"\n",(0,a.jsx)(t.h3,{id:"6-record-originate-call-conversations",children:"6: Record Originate call conversations"}),"\n",(0,a.jsxs)(t.p,{children:["To enable call recording, simply use the ",(0,a.jsx)(t.code,{children:"Mix Monitor"})," component in the Dialplan. After the call ends, the audio file name is sent as a parameter in the ",(0,a.jsx)(t.code,{children:"CDR"})," event to the web service. To download the file, the ",(0,a.jsx)(t.code,{children:"reports/quick/cdr"})," API is used. For more information, visit ",(0,a.jsx)(t.a,{href:"../SimotelAPI/v4/report/audio_download",children:"here"}),"."]}),"\n",(0,a.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/0z0jkz6prd7i5oi0vd0daninji4zm19cg237q76e1zbaed4ibu",target:"_blank",children:(0,a.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/0z0jkz6prd7i5oi0vd0daninji4zm19cg237q76e1zbaed4ibu/plan.png"})}),"\n",(0,a.jsx)(t.h3,{id:"7-conduct-a-survey-after-the-call",children:"7: Conduct a survey after the call"}),"\n",(0,a.jsxs)(t.p,{children:["By connecting the ",(0,a.jsx)(t.code,{children:"poll"})," component to the output ",(0,a.jsx)(t.code,{children:"S"})," of the ",(0,a.jsx)(t.code,{children:"Trunk API"})," component, a survey can be conducted after the call ends. The survey score is sent as a parameter in the ",(0,a.jsx)(t.code,{children:"CDR"})," event to the web service."]}),"\n",(0,a.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/hdy7b9nhxaiu6co3o0ijppybho1z14ht2d38ya098w9pz3mmo8",target:"_blank",children:(0,a.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/hdy7b9nhxaiu6co3o0ijppybho1z14ht2d38ya098w9pz3mmo8/plan.png"})}),"\n",(0,a.jsx)(t.h3,{id:"8-warning-before-call-ends",children:"8: Warning Before Call Ends"}),"\n",(0,a.jsx)(t.p,{children:"In a two-way call, this feature allows a beep to be played for the second party (advisor, etc.) a few minutes before the call is disconnected, notifying them that the call is about to end."}),"\n",(0,a.jsx)(t.p,{children:"To activate this feature, simply add the following settings in the simotel.ini file under the path /etc/simotel."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-shell",children:"\r\n[api]\r\n# default=None\r\nclient_api_caller_timeout = 1\r\ncall_limit_warning_beeper_enabled = True\r\n    call_limit_warning_beeper_announce = beep\r\n    call_limit_warning_beeper_time_to_end_sec = 20\r\n    call_limit_warning_beeper_repeat_time_sec = 10\r\n\t\n"})}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"call_limit_warning_beeper_enabled"}),": This parameter activates the call_limit in exten, trunk, etc. When used in a call, if this option is enabled, a warning beep will be played for the caller before the call ends."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"call_limit_warning_beeper_announce"}),": The audio file to be played for the caller, which must either contain valid characters and words or be the full path to the file."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"call_limit_warning_beeper_time_to_end_sec"}),": Specifies the number of seconds before the call limit ends when the warning should be given. For example, for a 4-minute warning, set this to 240 seconds. It is based on seconds."]}),"\n"]}),"\n",(0,a.jsxs)(t.li,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"call_limit_warning_beeper_repeat_time_sec"}),": Specifies how often the warning message should be repeated after the call limit is reached, in seconds."]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"9-play-hold-music-for-the-first-party",children:"9: Play Hold Music for the First Party"}),"\n",(0,a.jsx)(t.p,{children:"After the first party answers the call, the system starts dialing the second party. During this time, a ringing sound is played for the first party, which might confuse the user and even lead to them hanging up before the second party answers."}),"\n",(0,a.jsxs)(t.p,{children:["In a Originate call, you can play hold music for the first party after they answer and before the second party is called. There is also the option to implement dynamic hold music per user, though this is not the main focus here. To use this feature, simply use the ",(0,a.jsx)(t.code,{children:"Announcement"})," component in your scenario."]}),"\n",(0,a.jsx)("a",{href:"https://dialplan.mysup.ir/live/plan/6bd4pe2ng8gxreqszgj6aryb6vpmd55nfqjb6jszvlj4m0sf4k",target:"_blank",children:(0,a.jsx)("img",{src:"https://dialplan.mysup.ir/live/thumb/6bd4pe2ng8gxreqszgj6aryb6vpmd55nfqjb6jszvlj4m0sf4k/plan.png"})})]})}function p(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9329:(e,t,n)=>{n.d(t,{A:()=>i});n(6540);var r=n(8215);const a={tabItem:"tabItem_Ymn6"};var l=n(4848);function i({children:e,hidden:t,className:n}){return(0,l.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,n),hidden:t,children:e})}},5537:(e,t,n)=>{n.d(t,{A:()=>_});var r=n(6540),a=n(8215),l=n(5627),i=n(6347),s=n(372),o=n(604),c=n(1861),d=n(8749);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((({props:{value:e,label:t,attributes:n,default:r}})=>({value:e,label:t,attributes:n,default:r})))}(n);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p({value:e,tabValues:t}){return t.some((t=>t.value===e))}function m({queryString:e=!1,groupId:t}){const n=(0,i.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,o.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(n.location.search);t.set(a,e),n.replace({...n.location,search:t.toString()})}),[a,n])]}function j(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=h(e),[i,o]=(0,r.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[c,u]=m({queryString:n,groupId:a}),[j,x]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,a]=(0,d.Dv)(t);return[n,(0,r.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:a}),g=(()=>{const e=c??j;return p({value:e,tabValues:l})?e:null})();(0,s.A)((()=>{g&&o(g)}),[g]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),x(e)}),[u,x,l]),tabValues:l}}var x=n(9136);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(4848);function b({className:e,block:t,selectedValue:n,selectValue:r,tabValues:i}){const s=[],{blockElementScrollPositionUntilNextRender:o}=(0,l.a_)(),c=e=>{const t=e.currentTarget,a=s.indexOf(t),l=i[a].value;l!==n&&(o(t),r(l))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{const n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:i.map((({value:e,label:t,attributes:r})=>(0,v.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...r,className:(0,a.A)("tabs__item",g.tabItem,r?.className,{"tabs__item--active":n===e}),children:t??e},e)))})}function f({lazy:e,children:t,selectedValue:n}){const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=l.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function y(e){const t=j(e);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,v.jsx)(b,{...t,...e}),(0,v.jsx)(f,{...t,...e})]})}function _(e){const t=(0,x.A)();return(0,v.jsx)(y,{...e,children:u(e.children)},String(t))}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var r=n(6540);const a={},l=r.createContext(a);function i(e){const t=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(l.Provider,{value:t},e.children)}}}]);