---

sidebar_label: "معرفی Ivr API"
title: "Ivr API"
---


# IVR API

این کامپوننت همانند کامپوننت IVR است، با این تفاوت که عدد وارد شده توسط تماس‌‌ گیرنده را به وب‌ سرویس ارسال می‌کند و وب‌ سرویس نیز در جواب، نام خروجی‌‌ای که تماس 
باید خارج شود را بر‌ می‌گرداند.

## پارامترها کامپوننت

- **API Address**: آدرس وب‌‌ سرویس .

- **Announcement**: فایل صوتی که در ورود به IVR پخش می‌گردد.

- **Timeout Announcement**: پیامی که هنگام Timeout شدن پخش‌ می‌شود.

- **Invalid Announcement**: پیامی که هنگام واردکردن شماره اشتباه از سوی تماس‌‌ گیرنده پخش‌ می‌شود.

- **Enable Direct Dial**: درصورت فعال‌‌بودن، تماس‌‌گیرنده‌ می‌تواند شماره داخلی یکی از کاربران تعریف ‌شده در سیستم را بگیرد.

- **Repeat Loop**: تعداد تکرار IVR‌ است (درصورت واردنشدن عدد از طرف تماس‌‌گیرنده).

- **Timeout (Sec)**: مدت زمانی که فرصت داده‌ می‌شود تا پس از واردشدن عدد اول، عدد دوم (برحسب ثانیه) وارد گردد. مقدار صفر قابليت timeout را غيرفعال مي‌كند.

- **Max Digits**: حداکثر رقم‌‌هایی که تماس ‌‌گیرنده‌ می‌تواند وارد کند.

- **Case**: عددی است که اگر کاربر وارد کند خروجی مربوطه اجرا‌ می‌گردد.

- **Text**: نامی است که تنها برای نمایش در ظاهر کامپوننت استفاده‌ می‌شود و‌ می‌توان برای سهولت در دسترسی از آن استفاده کرد.
 

## قالب وب‌‌سرویس
با‌توجه به مقادیر منوی تنظیمات مربوط به `API Method & API Version`، آدرس وب‌ سرویس فراخوانی شده و داده‌های زیر همراه با آن ارسال می‌گردند.

- **src**: شماره تماس‌‌ گیرنده (Caller یا CID).
- **dst**: شماره وارد شده (Callee یا DID یا Exten).
- **data**: داده‌‌ای که تماس‌ ‌گیرنده در مسیر تماس وارد کرده است (مثلاً داده‌‌ای که در IVR وارد کرده است).
- **unique_id**: شناسه یکتای تماس.
- **app_name**: نام کامپوننت جاری.

و در جواب، خروجی زیر را به‌صورت json دریافت‌ می‌کند.

```shell
{
  "ok": "1",
  "case": "3"
}
```

**در نهایت تماس از خروجی مورد نظر (در اینجا 3) خارج‌ می‌شود.**