---

sidebar_label: "معرفی Trunk API"
title: "Trunk API"
---


# Trunk API

از این کامپوننت برای ایجاد تماس بر روی ترانک استفاده‌ می‌شود. عملکرد آن مشابه Trunk است، با این تفاوت که ازطریق وب‌‌ سرویس، نام ترانک و شماره داخلی مقصد را دریافت و
فقط تماس را برای آن شماره ایجاد‌ می‌نماید. یکی از کاربردهای رایج این کامپوننت ایجاد محدودیت زمانی (call_limit) بر روی وب‌ سرویس تماس‌ دوطرفه می‌باشد.

## پارامترها کامپوننت

- **API Address**: آدرس وب‌‌ سرویس.
- **Timeout (sec)**: مدت زمانی‌که تماس برای پاسخگویی و برقراری ارتباط‌ منتظر می‌ماند. (برحسب ثانیه).
- **Options**: تنظیمات تماس.
 
## خروجی‌های کامپوننت

- **S (Success)**: درصورتی‌‌که تماس موفق باشد. تماس از این قسمت خارج می‌شود (می‌توان در این مرحله نظرسنجی انجام داد).

- **F (Fail)**: درصورتی‌‌که تماس موفق نباشد، یعنی مقصد به هر دلیلی پاسخ ندهد تماس از این قسمت خارج می‌شود (می‌توان در این مرحله آوای مشترک در دسترس نمی‌باشد را پخش کرد).

## قالب وب‌‌سرویس
با‌توجه به مقادیر منوی تنظیمات مربوط به `API Method & API Version`، آدرس وب‌سرویس فراخوانی شده و داده‌های زیر همراه با آن ارسال می‌گردند.

- **src**: شماره تماس‌‌گیرنده (Caller یا CID).
- **dst**: شماره واردشده (Callee یا DID یا Exten).
- **data**: داده‌‌ای که تماس‌‌گیرنده در مسیر تماس وارد کرده است (مثلاً داده‌‌ای که در IVR وارد کرده است).
- **unique_id**: شناسه یکتای تماس.
- **app_name**: نام کامپوننت جاری.

و در جواب، خروجی زیر را به‌صورت json دریافت‌ می‌کند.

```shell
{
 "ok": "1",				
  "trunk": "NasimTrunk",
  "extension": "09151412541",
  "call_limit": "300"

}
```

**در نهایت تماس را برای مقصد (در اینجا 09151412541) با محدودیت زمانی مکالمه 300 ثانیه ایجاد‌ می‌کند.**